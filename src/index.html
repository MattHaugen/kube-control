<!DOCTYPE html>
<html>
<head>
   <meta charset="utf-8">
   <title>KubeControl</title>
   <!-- Electron Compile doesn't support importing CSS/SCSS in the TSX files -->
   <link rel="stylesheet" type="text/css" href="global.scss">
</head>
<body>
   <div id="root"></div>
</body>
<script>
import * as React from "react";
import * as ReactDOM from "react-dom";

//Hot (Re)Loader
import { AppContainer } from "react-hot-loader";

// Redux
import { Provider } from "react-redux";
import { createStore, applyMiddleware, compose } from "redux";
import thunk from "redux-thunk";

// Router
import createHistory from "history/createBrowserHistory";
import { Route } from "react-router";
import { ConnectedRouter, routerMiddleware } from "react-router-redux";

//Reducers
import rootReducer from "./reducers";

const render = () => {
   const InitializePage = require("./containers/InitializePage").InitializePage;
   const Home = require("./home").Home;

   const history = createHistory();
   const historyMiddleware = routerMiddleware(history);

   const middleware = [thunk, historyMiddleware];
   const composeEnhancers =
      window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;
   const store = createStore(
      rootReducer,
      composeEnhancers(applyMiddleware(...middleware))
   );

   ReactDOM.render(
      <AppContainer>
         <Provider store={store}>
            <ConnectedRouter history={history}>
               <div>
                  <Route path="/" component={Home} />
               </div>
            </ConnectedRouter>
         </Provider>
      </AppContainer>,
      document.getElementById("root")
   );
};

render();
if (module.hot) {
   module.hot.accept(render);
}
</script>
</html>
